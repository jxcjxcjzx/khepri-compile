/**
 * @fileOverview Khepri source optimization compiler stage.
 */
package optimize
with
    import '../inline' inline,
    import 'bes::object' {setProperty}
in {

/**
 * 
 */
optimize = \input#{ast data} -> let
    out = inline.optimize(ast, data)
in
    setProperty(
        setProperty(input, 'ast', out.tree),
        'data',
        out.data);

}