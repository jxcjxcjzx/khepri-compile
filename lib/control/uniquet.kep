/**
 * @fileOverview
 */
package UniqueT
with
    import 'akh::trans::state' StateT
in {

/* Structure
 ******************************************************************************/
UniqueT = \m -> {
    var Instance = StateT(m);
    
    Instance.unique = Instance.prototype.unique =
        Instance.get.chain \ x ->
            Instance.put(x + 1)
                .chain \-> Instance.of x;
    
    return Instance;
};

/* Running
 ******************************************************************************/
/**
 * Run an unique computation.
 */
UniqueT.runUniqueT = \m initial ->
     StateT.evalStateT(m, initial || 1);

}